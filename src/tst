import React, { useState, useEffect } from 'react';
import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';
import LandingPage from './pages/LandingPage';
import AboutPage from './pages/AboutPage';
import Login from './pages/Login';
import Register from './pages/Register';
import ArtistRegistration from './pages/Artists/ArtistRegistration';
import UserRegistration from './pages/Users/UserRegistration';
import ArtistProfile from './pages/Artists/ArtistProfile';
import UserProfile from './pages/Users/UserProfile';
import ExhibitsList from './pages/ArtWorks/ExhibitsList'; 
import ExhibitDetail from './pages/ArtWorks/ExhibitDetail';
import ArtworksList from './pages/ArtWorks/ArtworksList';  
import ArtworkDetail from './pages/ArtWorks/ArtworkDetail';
import Header from './components/Header';
import Footer from './components/Footer';
import './App.css';

function App() {
	const [exhibits, setExhibits] = useState([]);

	useEffect(() => {
	  // Fetch exhibit data from the backend
	  fetch('/api/exhibits/') 
		.then(response => response.json())
		.then(data => setExhibits(data))
		.catch(error => console.error(error));
	}, []);

  return (
    <Router>
      <div className="App">
        <Header />
        <Routes>
          <Route path="/" element={<LandingPage />} />
          <Route path="/aboutpage" element={<AboutPage />} />

          <Route path="/login" element={<Login />} />
          <Route path="/Register" element={<Register />} />
          <Route path="/artistregistration" element={<ArtistRegistration />} />
          <Route path="/userregistration" element={<UserRegistration />} />
          <Route path="/ArtistProfile" element={<ArtistProfile />} />
          <Route path="/UserProfile" element={<UserProfile />} />
          <Route path="/ExhibitsList" element={<ExhibitsList />} />
          <Route path="/exhibit/:id" element={<ExhibitDetail />} />
          <Route path="/ArtworksList" element={<ArtworksList />} />
          <Route path="/artwork/:id" element={<ArtworkDetail />} />
        </Routes>
		<ExhibitsList exhibits={exhibits}/>
        <Footer />
      </div>
    </Router>
  );
}

export default App;